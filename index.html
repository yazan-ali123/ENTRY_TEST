<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªÙ†Ø§ÙØ³ÙŠØ©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body { font-family: 'Tajawal', sans-serif; }
        .code-snippet { direction: ltr; text-align: left; font-family: 'Courier New', Courier, monospace; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .glow-btn { box-shadow: 0 0 15px rgba(37, 99, 235, 0.5); }
        .glow-btn:hover { box-shadow: 0 0 25px rgba(37, 99, 235, 0.7); }
        .card-hover:hover { transform: translateY(-5px); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1); }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 min-h-screen flex flex-col">

    <!-- Ø§Ù„Ø±Ø£Ø³ (Header) -->
    <header class="bg-gradient-to-r from-blue-800 to-indigo-900 text-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4">
            <div class="flex flex-row justify-between items-center">
                <div>
                    <h1 class="text-xl md:text-2xl font-bold flex items-center gap-2 cursor-pointer" onclick="returnToDashboard()">
                        <i class="fa-solid fa-laptop-code"></i>
                       
                    </h1>
                </div>
                
                <div id="status-bar" class="hidden flex items-center gap-4 bg-white/10 px-4 py-2 rounded-full backdrop-blur-sm">
                    <div id="timer-container" class="hidden flex items-center gap-2 text-yellow-300 font-mono font-bold text-lg transition-colors duration-300">
                        <i class="fa-regular fa-clock"></i>
                        <span id="timer-display">00:00</span>
                    </div>
                    <div id="timer-separator" class="hidden h-4 w-px bg-white/30"></div>
                    <div class="flex items-center gap-2 text-sm md:text-base">
                        <i class="fa-solid fa-user"></i>
                        <span id="user-display">Ø²Ø§Ø¦Ø±</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- 1. Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
    <div id="start-screen" class="flex-grow flex items-center justify-center p-4 fade-in">
        <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-center">
            <div class="mb-6 text-blue-600 text-6xl">
                <i class="fa-solid fa-clipboard-question"></i>
            </div>
            <h2 class="text-2xl font-bold mb-2 text-gray-800">Ù…Ù†ØµØ© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ ÙˆØ§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</h2>
            <p class="text-gray-500 mb-6">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ Ù„Ù„Ø¨Ø¯Ø¡.</p>
            
            <input type="text" id="username-input" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„ Ù‡Ù†Ø§..." 
                   class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none mb-4 text-center text-lg"
                   onkeypress="handleEnter(event)">
            
            <button onclick="handleLogin()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-all transform hover:scale-105 glow-btn">
                ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ <i class="fa-solid fa-arrow-left mr-2"></i>
            </button>
        </div>
    </div>

    <!-- 2. Ù„ÙˆØ­Ø© Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± (Dashboard) -->
    <div id="dashboard-screen" class="hidden container mx-auto px-4 py-12 max-w-5xl flex-grow fade-in">
        <div class="text-center mb-10">
            <h2 class="text-3xl font-bold text-gray-800 mb-3">Ù„ÙˆØ­Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</h2>
            <p class="text-gray-500">Ø§Ø®ØªØ± Ø§Ø®ØªØ¨Ø§Ø±Ø§Ù‹ Ù„Ù„Ø¨Ø¯Ø¡. Ø§Ù†ØªØ¨Ù‡ Ù„Ù„Ù…Ø¯Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© Ù„ÙƒÙ„ Ø§Ø®ØªØ¨Ø§Ø±.</p>
        </div>

        <div id="quiz-grid" class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
            <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ù‡Ù†Ø§ -->
        </div>
    </div>

    <!-- 3. Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± -->
    <main id="quiz-content" class="hidden container mx-auto px-4 py-8 max-w-4xl flex-grow">
        <button onclick="returnToDashboard()" class="mb-4 text-gray-500 hover:text-blue-600 flex items-center gap-2 transition-colors text-sm font-bold">
            <i class="fa-solid fa-arrow-right"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©
        </button>

        <div id="active-quiz-container" class="bg-white rounded-2xl shadow-xl p-6 md:p-8 fade-in">
            <div class="border-b pb-4 mb-6 flex justify-between items-center flex-wrap gap-4">
                <div>
                    <h2 id="quiz-title" class="text-2xl font-bold text-blue-800">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h2>
                    <p class="text-gray-500 mt-1">Ø£Ø¬Ø¨ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø«Ù… Ø§Ø¶ØºØ· ØªØ³Ù„ÙŠÙ….</p>
                </div>
                <div class="flex gap-2">
                    <div id="quiz-duration-badge" class="bg-yellow-50 text-yellow-700 px-4 py-2 rounded-full text-sm font-bold border border-yellow-100">
                        <i class="fa-regular fa-clock"></i> <span id="quiz-time-text"></span>
                    </div>
                    <div id="quiz-q-count" class="bg-blue-50 text-blue-800 px-4 py-2 rounded-full text-sm font-bold border border-blue-100">
                        0 Ø£Ø³Ø¦Ù„Ø©
                    </div>
                </div>
            </div>
            
            <form id="active-quiz-form" onsubmit="submitQuiz(event)">
                <div id="quiz-questions-area" class="space-y-8"></div>
                
                <div class="mt-8 border-t pt-6">
                    <div id="action-area" class="flex justify-between items-center">
                        <button type="submit" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition duration-200 flex items-center gap-2">
                            <i class="fa-solid fa-paper-plane"></i>
                            ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
                        </button>
                    </div>
                    
                    <div id="result-area" class="hidden mt-4 text-center bg-gray-50 p-6 rounded-xl border border-gray-200">
                         <div id="result-text" class="text-2xl font-bold mb-4"></div>
                         <button type="button" onclick="returnToDashboard()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-full transition-colors shadow-md">
                            Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                         </button>
                    </div>
                </div>
            </form>
        </div>
    </main>

    <!-- ØªØ°ÙŠÙŠÙ„ Ø§Ù„ØµÙØ­Ø© -->
    <footer class="text-center py-6 text-gray-500 text-sm mt-auto border-t border-gray-200 bg-white">
        <p>Developed by Yazan Ali &copy; 2025</p>
    </footer>

    <script>
        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Telegram
        const TELEGRAM_BOT_TOKEN = "8409840849:AAGJwvP3n7MulSoBEiGJxh_8preiWeXIOgI"; 
        const TELEGRAM_CHAT_ID = "6033677437"; 

        let currentUser = "";
        let timerInterval;
        let timeRemaining = 0;
        let quizActive = false;
        let currentQuizId = null;

        // === Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© ===
        const defaultQuizzes = {
            'placement': {
                id: 'placement',
                title: 'ØªØ­Ø¯ÙŠØ¯ Ù…Ø³ØªÙˆÙ‰ (Placement Test)',
                desc: 'Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„ Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª Ù„ØºØ© C++ (40 Ø³Ø¤Ø§Ù„)',
                icon: 'fa-graduation-cap',
                color: 'emerald',
                duration: 45, // 45 Ø¯Ù‚ÙŠÙ‚Ø©
                questions: [
                    // --- Basics & Variables ---
                    { id: 1, question: "Ù…Ø§ Ù‡Ùˆ Ù†Ø§ØªØ¬ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù‚Ø³Ù…Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©ØŸ", code: "int x = 5;\nint y = 2;\ncout << x / y;", options: ["2.5", "2", "3", "Error"], correct: 1 },
                    { id: 2, question: "Ù…Ø§ Ù‡Ùˆ Ù†ÙˆØ¹ Ø§Ù„Ù…ØªØºÙŠØ± Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù†ØµÙˆØµØŸ", code: "Example: \"Hello World\"", options: ["char", "String", "std::string", "text"], correct: 2 },
                    { id: 3, question: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„ØµÙŠØºØ© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù„ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©ØŸ", code: "___ main() { ... }", options: ["void", "int", "float", "program"], correct: 1 },
                    { id: 4, question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠ Ù„Ù„Ù…ØªØºÙŠØ± Ø§Ù„ØµØ­ÙŠØ­ (Integer)ØŸ", code: "int x;", options: ["1 byte", "2 bytes", "4 bytes", "8 bytes"], correct: 2 },
                    { id: 5, question: "Ù…Ø§ Ù‡Ùˆ Ù†Ø§ØªØ¬ Ø¹Ù…Ù„ÙŠØ© Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù‚Ø³Ù…Ø© (Modulus)ØŸ", code: "cout << 10 % 3;", options: ["3", "1", "0", "3.33"], correct: 1 },
                    { id: 6, question: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© Ù„ÙƒØªØ§Ø¨Ø© ØªØ¹Ù„ÙŠÙ‚ Ù…Ù† Ø³Ø·Ø± ÙˆØ§Ø­Ø¯ØŸ", code: "code...  comment", options: ["/* ... */", "# ...", "// ...", "<!-- ... -->"], correct: 2 },
                    { id: 7, question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø°ÙŠ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙ†ØªÙ‡ÙŠ Ø¨Ù‡ ÙƒÙ„ Ø³Ø·Ø± Ø¨Ø±Ù…Ø¬ÙŠØŸ", code: "int x = 5 _", options: ["Ø§Ù„Ù†Ù‚Ø·Ø© (.)", "Ø§Ù„Ù†Ù‚Ø·ØªÙŠÙ† (:)", "Ø§Ù„ÙØ§ØµÙ„Ø© Ø§Ù„Ù…Ù†Ù‚ÙˆØ·Ø© (;)", "Ø§Ù„ÙØ§ØµÙ„Ø© (,)"], correct: 2 },
                    { id: 8, question: "Ø£ÙŠ Ù…Ù† Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ØªØ§Ù„ÙŠØ© ÙŠØ¹ØªØ¨Ø± ØµØ§Ù„Ø­Ø§Ù‹ Ù„ØªØ³Ù…ÙŠØ© Ù…ØªØºÙŠØ±ØŸ", code: null, options: ["1variable", "_variable", "var-iable", "int"], correct: 1 },
                    
                    // --- Loops ---
                    { id: 9, question: "ÙƒÙ… Ù…Ø±Ø© Ø³ÙŠØªÙ… Ø·Ø¨Ø§Ø¹Ø© Ù‚ÙŠÙ…Ø© i ÙÙŠ Ø§Ù„Ø­Ù„Ù‚Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©ØŸ", code: "for(int i=0; i<10; i+=2) {\n  cout << i;\n}", options: ["10 Ù…Ø±Ø§Øª", "5 Ù…Ø±Ø§Øª", "9 Ù…Ø±Ø§Øª", "4 Ù…Ø±Ø§Øª"], correct: 1 },
                    { id: 10, question: "Ù…Ø§Ø°Ø§ ÙŠØ­Ø¯Ø« Ø¥Ø°Ø§ ÙƒØ§Ù† Ø´Ø±Ø· Ø§Ù„Ø­Ù„Ù‚Ø© Ø®Ø§Ø·Ø¦Ø§Ù‹ (false) Ù…Ù†Ø° Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©ØŸ", code: "while(false) { ... }", options: ["ØªØªÙ†ÙØ° Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", "Ù„Ø§ ØªØªÙ†ÙØ° Ø£Ø¨Ø¯Ø§Ù‹", "ØªØªÙ†ÙØ° Ø¥Ù„Ù‰ Ù…Ø§ Ù„Ø§ Ù†Ù‡Ø§ÙŠØ©", "Ø®Ø·Ø£ Ø¨Ø±Ù…Ø¬ÙŠ"], correct: 1 },
                    { id: 11, question: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…ÙŠØ²Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ø­Ù„Ù‚Ø© do-whileØŸ", code: "do { ... } while(condition);", options: ["ØªØªÙ†ÙØ° 0 Ù…Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„", "ØªØªÙ†ÙØ° Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„", "ØªØ¹Ù…Ù„ Ù„Ù„Ø£Ø¨Ø¯", "Ø£Ø³Ø±Ø¹ ÙÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°"], correct: 1 },
                    { id: 12, question: "Ù„Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø­Ù„Ù‚Ø© ÙˆØ§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù†Ù‡Ø§ ÙÙˆØ±Ø§Ù‹ Ù†Ø³ØªØ®Ø¯Ù…:", code: null, options: ["stop", "return", "break", "continue"], correct: 2 },
                    { id: 13, question: "Ù„ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙˆØ§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø¯ÙˆØ±Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© Ù†Ø³ØªØ®Ø¯Ù…:", code: null, options: ["skip", "break", "continue", "next"], correct: 2 },
                    { id: 14, question: "Ù…Ø§ Ù‡Ùˆ Ù†Ø§ØªØ¬ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„ØªØ§Ù„ÙŠØŸ", code: "int i = 0;\nwhile(i < 3) {\n    cout << i;\n    i++;\n}", options: ["012", "123", "0123", "infinite loop"], correct: 0 },
                    { id: 15, question: "Ù†ÙˆØ¹ Ø§Ù„Ø­Ù„Ù‚Ø© Ø§Ù„Ø£Ù†Ø³Ø¨ Ø¹Ù†Ø¯Ù…Ø§ Ù†Ø¹Ø±Ù Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª Ù…Ø³Ø¨Ù‚Ø§Ù‹:", code: null, options: ["while", "do-while", "for", "if"], correct: 2 },
                    { id: 16, question: "Ù…Ø§Ø°Ø§ ÙŠØ­Ø¯Ø« Ø¥Ø°Ø§ Ù†Ø³ÙŠÙ†Ø§ Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø¯Ø§Ø®Ù„ Ø­Ù„Ù‚Ø© whileØŸ", code: "while(i < 10) { cout << i; }", options: ["Syntax Error", "Infinite Loop (Ø­Ù„Ù‚Ø© Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠØ©)", "Ù„Ø§ Ø´ÙŠØ¡", "Runtime Error"], correct: 1 },

                    // --- Conditions ---
                    { id: 17, question: "Ø£ÙŠ Ù…Ù…Ø§ ÙŠÙ„ÙŠ ÙŠØ¹ØªØ¨Ø± ÙƒØªØ§Ø¨Ø© ØµØ­ÙŠØ­Ø© (Syntax) Ù„Ø¬Ù…Ù„Ø© Ø´Ø±Ø·ÙŠØ© ifØŸ", code: null, options: ["if x = 5 then", "if (x == 5)", "check x == 5", "if {x == 5}"], correct: 1 },
                    { id: 18, question: "Ù…Ø§ ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø±Ù…Ø² == ØŸ", code: "if (x == y)", options: ["Ø¥Ø³Ù†Ø§Ø¯ Ù‚ÙŠÙ…Ø© Ù„Ù„Ù…ØªØºÙŠØ±", "Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ù…Ø³Ø§ÙˆØ§Ø©", "Ù„Ø§ ÙŠØ³Ø§ÙˆÙŠ", "ØªØ¹Ù„ÙŠÙ‚"], correct: 1 },
                    { id: 19, question: "Ù…Ø§ ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø±Ù…Ø² != ØŸ", code: "if (x != y)", options: ["ØªØ³Ø§ÙˆÙŠ", "Ù„Ø§ ØªØ³Ø§ÙˆÙŠ", "Ø£ÙƒØ¨Ø± Ø£Ùˆ ÙŠØ³Ø§ÙˆÙŠ", "Ù†ÙÙŠ"], correct: 1 },
                    { id: 20, question: "Ù…Ø§ Ù†Ø§ØªØ¬ Ø§Ù„Ø´Ø±Ø· Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠ Ø§Ù„ØªØ§Ù„ÙŠØŸ", code: "(5 > 3 && 2 < 4)", options: ["True", "False", "Error", "10"], correct: 0 },
                    { id: 21, question: "Ù…Ø§ Ù†Ø§ØªØ¬ Ø§Ù„Ø´Ø±Ø· Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠ Ø§Ù„ØªØ§Ù„ÙŠØŸ", code: "(5 > 10 || 2 < 4)", options: ["True", "False", "Error", "Null"], correct: 0 },
                    { id: 22, question: "Ù…ØªÙ‰ ÙŠØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ø´Ø±Ø·ÙŠØ© Ø§Ù„ØªØ§Ù„ÙŠØ©ØŸ", code: "if (x > 5) { ... }", options: ["Ø¹Ù†Ø¯Ù…Ø§ x ØªØ³Ø§ÙˆÙŠ 5", "Ø¹Ù†Ø¯Ù…Ø§ x Ø£Ù‚Ù„ Ù…Ù† 5", "Ø¹Ù†Ø¯Ù…Ø§ x Ø£ÙƒØ¨Ø± Ù…Ù† 5", "Ø¯Ø§Ø¦Ù…Ø§Ù‹"], correct: 2 },
                    { id: 23, question: "Ù…Ø§ Ù‡ÙŠ Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…Ø¹Ø§Ù…Ù„ Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠ ! (Not)ØŸ", code: "!true", options: ["True", "False", "Error", "Null"], correct: 1 },
                    { id: 24, question: "Ø£ÙŠ Ù…Ù…Ø§ ÙŠÙ„ÙŠ ÙŠÙ…Ø«Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ (Ternary Operator)ØŸ", code: null, options: ["condition ? true : false", "condition : true ? false", "if condition ? true", "condition -> true"], correct: 0 },

                    // --- Arrays & Strings ---
                    { id: 25, question: "ÙƒÙŠÙ Ù†ØµÙ„ Ù„Ù„Ø¹Ù†ØµØ± Ø§Ù„Ø£ÙˆÙ„ ÙÙŠ Ø§Ù„Ù…ØµÙÙˆÙØ©ØŸ", code: "int arr[5];", options: ["arr[0]", "arr[1]", "arr.first()", "arr(0)"], correct: 0 },
                    { id: 26, question: "Ù…Ø§ Ù‡Ùˆ Ø¢Ø®Ø± ÙÙ‡Ø±Ø³ (Index) ØµØ§Ù„Ø­ ÙÙŠ Ø§Ù„Ù…ØµÙÙˆÙØ© Ø§Ù„ØªØ§Ù„ÙŠØ©ØŸ", code: "int arr[5];", options: ["5", "4", "6", "0"], correct: 1 },
                    { id: 27, question: "Ù…Ø§Ø°Ø§ ÙŠØ­Ø¯Ø« Ø¹Ù†Ø¯ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ø¹Ù†ØµØ± Ø®Ø§Ø±Ø¬ Ø­Ø¯ÙˆØ¯ Ø§Ù„Ù…ØµÙÙˆÙØ©ØŸ", code: "int arr[5];\ncout << arr[10];", options: ["ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ù…ØµÙÙˆÙØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹", "ÙŠØ¹ÙˆØ¯ Ù„Ù„Ø¨Ø¯Ø§ÙŠØ©", "Undefined Behavior (Ø®Ø·Ø£)", "ÙŠØ¹ÙŠØ¯ 0"], correct: 2 },
                    { id: 28, question: "Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù„ØªØ¹Ø±ÙŠÙ Ù…ØµÙÙˆÙØ© ØªØ­ØªÙˆÙŠ 3 Ø£Ø¹Ø¯Ø§Ø¯:", code: null, options: ["int arr(3);", "arr{3} int;", "int arr[3];", "array int 3;"], correct: 2 },
                    { id: 29, question: "Ù…Ø§ Ù‡Ùˆ Ù†Ø§ØªØ¬ Ø¬Ù…Ø¹ Ø­Ø±Ù Ù…Ø¹ Ø±Ù‚Ù…ØŸ", code: "char c = 'A'; // ASCII 65\ncout << c + 1;", options: ["AB", "66 (Ù‚ÙŠÙ…Ø© Ø§Ù„Ø­Ø±Ù B)", "Error", "A1"], correct: 1 },
                    { id: 30, question: "Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙ†Ø§ Ù†Øµ string s=\"Hello\"ØŒ Ù…Ø§ Ù‡Ùˆ ÙÙ‡Ø±Ø³ Ø§Ù„Ø­Ø±Ù 'o'ØŸ", code: null, options: ["3", "4", "5", "0"], correct: 1 },
                    { id: 31, question: "Ù„Ù…Ø¹Ø±ÙØ© Ø¹Ø¯Ø¯ Ø£Ø­Ø±Ù Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø®Ø²Ù† ÙÙŠ Ø§Ù„Ù…ØªØºÙŠØ± s:", code: "string s = \"Hello\";", options: ["s.length()", "len(s)", "s.size", "s.count()"], correct: 0 },
                    { id: 32, question: "ÙƒÙŠÙ Ù†Ù‚ÙˆÙ… Ø¨Ø¯Ù…Ø¬ Ù†ØµÙŠÙ† s1 Ùˆ s2ØŸ", code: "string s1, s2;", options: ["s1 . s2", "s1 + s2", "add(s1, s2)", "s1 & s2"], correct: 1 },

                    // --- Functions & Misc ---
                    { id: 33, question: "Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¯Ø§Ù„Ø© Ù„Ø§ ØªØ¹ÙŠØ¯ Ø£ÙŠ Ù‚ÙŠÙ…Ø©ØŒ ÙŠÙƒÙˆÙ† Ù†ÙˆØ¹Ù‡Ø§:", code: "___ myFunction()", options: ["int", "null", "void", "empty"], correct: 2 },
                    { id: 34, question: "Ù…Ø§Ø°Ø§ ÙŠØ¹Ù†ÙŠ Ø§Ù„Ø£Ù…Ø± return 0 ÙÙŠ Ù†Ù‡Ø§ÙŠØ© mainØŸ", code: null, options: ["Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù†ØªÙ‡Ù‰ Ø¨Ù†Ø¬Ø§Ø­", "Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬", "Ø·Ø¨Ø§Ø¹Ø© 0", "Ø­Ø¯Ø« Ø®Ø·Ø£"], correct: 0 },
                    { id: 35, question: "Ù…Ø§ Ù‡ÙŠ ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø£Ù…Ø± endlØŸ", code: "cout << \"Hello\" << endl;", options: ["Ø·Ø¨Ø§Ø¹Ø© Ø³Ø·Ø± Ø¬Ø¯ÙŠØ¯", "Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬", "Ù…Ø³Ø­ Ø§Ù„Ø´Ø§Ø´Ø©", "Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª"], correct: 0 },
                    { id: 36, question: "Ù…Ø§ Ù‡ÙŠ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…ØªØºÙŠØ± x ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„ØªØ§Ù„ÙŠØŸ", code: "int main() {\n  int x;\n  cout << x;\n}", options: ["0", "1", "Ù‚ÙŠÙ…Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© (Garbage)", "null"], correct: 2 },
                    { id: 37, question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„ÙƒØ§Ø¦Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§ØªØŸ", code: "___ >> variable;", options: ["cin", "cout", "return", "for"], correct: 0 },
                    { id: 38, question: "Ù…Ø§ Ù‡Ùˆ Ù†Ø§ØªØ¬ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„ØªØ§Ù„ÙŠØŸ (Post-increment)", code: "int x=5; \ncout << x++;", options: ["5", "6", "Error", "4"], correct: 0 },
                    { id: 39, question: "Ù…Ø§ Ù‡Ùˆ Ù†Ø§ØªØ¬ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„ØªØ§Ù„ÙŠØŸ (Pre-increment)", code: "int x=5; \ncout << ++x;", options: ["5", "6", "Error", "4"], correct: 1 },
                    { id: 40, question: "Ù…Ø§ Ù‡Ùˆ Ù†Ø§ØªØ¬ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø­Ø³Ø§Ø¨ÙŠØ©: 3 + 2 * 4 ØŸ", code: "(Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ù„Ù„Ø¶Ø±Ø¨)", options: ["20", "11", "9", "24"], correct: 1 }
                ]
            },
            'complexity': {
                id: 'complexity',
                title: 'Ø§Ù„ØªØ¹Ù‚ÙŠØ¯ Ø§Ù„Ø²Ù…Ù†ÙŠ',
                desc: 'Time Complexity & Big O (10 Ø£Ø³Ø¦Ù„Ø©)',
                icon: 'fa-clock',
                color: 'blue',
                duration: 15,
                questions: [
                    { id: 1, question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªØ¹Ù‚ÙŠØ¯ Ø§Ù„Ø²Ù…Ù†ÙŠ (Time Complexity) Ù„Ù„ÙƒÙˆØ¯ Ø§Ù„ØªØ§Ù„ÙŠØŸ", code: `for (int i = 0; i < N; i++) { cout << i << endl; }`, options: ["O(1)", "O(N)", "O(N^2)", "O(log N)"], correct: 1 },
                    { id: 2, question: "ÙÙŠ Ù„ØºØ© C++ØŒ ÙƒÙ… Ø¹Ù…Ù„ÙŠØ© ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ ÙŠÙ…ÙƒÙ† Ù„Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ØªÙ†ÙÙŠØ°Ù‡Ø§ ÙÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ø§Ù„ÙˆØ§Ø­Ø¯Ø©ØŸ", code: null, options: ["100 Ø¹Ù…Ù„ÙŠØ©", "1,000,000 (Ù…Ù„ÙŠÙˆÙ†)", "100,000,000 (100 Ù…Ù„ÙŠÙˆÙ†)", "10,000,000,000 (10 Ù…Ù„ÙŠØ§Ø±)"], correct: 2 },
                    { id: 3, question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªØ¹Ù‚ÙŠØ¯ Ø§Ù„Ø²Ù…Ù†ÙŠ Ù„Ù„Ø­Ù„Ù‚ØªÙŠÙ† Ø§Ù„Ù…ØªØ¯Ø§Ø®Ù„ØªÙŠÙ† Ø§Ù„ØªØ§Ù„ÙŠØªÙŠÙ†ØŸ", code: `for (int i = 0; i < N; i++) { for (int j = 0; j < N; j++) { /* Op */ } }`, options: ["O(N)", "O(N^2)", "O(N log N)", "O(2^N)"], correct: 1 },
                    { id: 4, question: "Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù‚ÙŠÙ…Ø© N ØªØ³Ø§ÙˆÙŠ 100,000. Ù‡Ù„ Ø§Ù„Ø­Ù„ Ø¨Ù€ O(N^2) Ù…Ù‚Ø¨ÙˆÙ„ØŸ", code: null, options: ["Ù†Ø¹Ù…ØŒ Ø¯Ø§Ø¦Ù…Ø§Ù‹", "Ù„Ø§ØŒ Ø³ÙŠØ³ØªØºØ±Ù‚ ÙˆÙ‚ØªØ§Ù‹ Ø·ÙˆÙŠÙ„Ø§Ù‹ Ø¬Ø¯Ø§Ù‹ (TLE)", "Ù†Ø¹Ù…ØŒ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø°Ø§ÙƒØ±Ø© ÙƒØ§ÙÙŠØ©", "Ù„Ø§ØŒ Ù„Ø£Ù† Ø§Ù„ÙƒÙˆØ¯ Ù„Ù† ÙŠØ¹Ù…Ù„"], correct: 1 },
                    { id: 5, question: "Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ø¹Ù†ØµØ± ÙÙŠ Ù…ØµÙÙˆÙØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø¤Ø´Ø± (Index) Ù…Ø«Ù„ `arr[5]` ÙŠØ¹ØªØ¨Ø± Ø¹Ù…Ù„ÙŠØ©:", code: null, options: ["O(1) - ÙˆÙ‚Øª Ø«Ø§Ø¨Øª", "O(N) - ÙˆÙ‚Øª Ø®Ø·ÙŠ", "O(log N) - ÙˆÙ‚Øª Ù„ÙˆØºØ§Ø±ÙŠØªÙ…ÙŠ", "ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø­Ø¬Ù… Ø§Ù„Ù…ØµÙÙˆÙØ©"], correct: 0 },
                    { id: 6, question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªØ¹Ù‚ÙŠØ¯ Ø§Ù„Ø²Ù…Ù†ÙŠ Ù„Ù„ÙƒÙˆØ¯ Ø§Ù„ØªØ§Ù„ÙŠ (Ù‚Ø³Ù…Ø© N Ø¹Ù„Ù‰ 2 ÙÙŠ ÙƒÙ„ Ø®Ø·ÙˆØ©)ØŸ", code: `while (N > 0) { N = N / 2; }`, options: ["O(N)", "O(N^2)", "O(log N)", "O(1)"], correct: 2 },
                    { id: 7, question: "ÙÙŠ Big O NotationØŒ Ù…Ø§Ø°Ø§ Ù†ÙØ¹Ù„ Ø¨Ø§Ù„Ø«ÙˆØ§Ø¨ØªØŸ (Ù…Ø«Ù„Ø§Ù‹ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ÙƒÙˆØ¯ ÙŠØ£Ø®Ø° 2N Ø¹Ù…Ù„ÙŠØ©)", code: null, options: ["Ù†Ø­ØªÙØ¸ Ø¨Ù‡Ø§ ÙØªØµØ¨Ø­ O(2N)", "Ù†ØªØ¬Ø§Ù‡Ù„Ù‡Ø§ ÙØªØµØ¨Ø­ O(N)", "Ù†Ø­ÙˆÙ„Ù‡Ø§ Ù„Ø£Ø³ ÙØªØµØ¨Ø­ O(N^2)", "ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ù‚ÙŠÙ…Ø© N"], correct: 1 },
                    { id: 8, question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªØ¹Ù‚ÙŠØ¯ Ø§Ù„Ø²Ù…Ù†ÙŠ Ù„Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ØŸ (Ù„Ø§Ø­Ø¸ Ø§Ù„Ø­Ù„Ù‚Ø© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ i)", code: `for (int i = 0; i < N; i++) { for (int j = 0; j < i; j++) { /* Op */ } }`, options: ["O(N)", "O(N log N)", "O(N^2)", "O(1)"], correct: 2 },
                    { id: 9, question: "Ø£ÙŠ Ù…Ù† Ø§Ù„ØªØ¹Ù‚ÙŠØ¯Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© ÙŠØ¹ØªØ¨Ø± 'Ø§Ù„Ø£Ø³Ø±Ø¹' ÙˆØ§Ù„Ø£ÙØ¶Ù„ Ø¹Ù†Ø¯ Ø²ÙŠØ§Ø¯Ø© Ø­Ø¬Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª N Ø¨Ø´ÙƒÙ„ ÙƒØ¨ÙŠØ±ØŸ", code: null, options: ["O(N!)", "O(N^2)", "O(N)", "O(log N)"], correct: 3 },
                    { id: 10, question: "Ø¹Ø§Ø¯Ø©Ù‹ØŒ Ù…Ø§Ø°Ø§ ÙŠÙ…Ø«Ù„ Ø§Ù„Ù€ Big O NotationØŸ", code: null, options: ["Ø£ÙØ¶Ù„ Ø­Ø§Ù„Ø© (Best Case)", "Ø£Ø³ÙˆØ£ Ø­Ø§Ù„Ø© (Worst Case - Upper Bound)", "Ù…ØªÙˆØ³Ø· Ø§Ù„Ø­Ø§Ù„Ø© (Average Case)", "Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ø¯Ø¯ Ø¨Ø§Ù„Ø«ÙˆØ§Ù†ÙŠ"], correct: 1 }
                ]
            }
        };

        let quizDatabase = {};

        function initApp() {
            // Ù†Ù‚ÙˆÙ… Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø¨ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªØ­Ø¯ÙŠØ«
            quizDatabase = JSON.parse(JSON.stringify(defaultQuizzes));
            renderDashboard();
        }

        function saveData() {
            // localStorage.setItem('usaco_quizzes', JSON.stringify(quizDatabase));
        }

        // --- ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ---

        function handleEnter(e) { if(e.key === 'Enter') handleLogin(); }

        function handleLogin() {
            const name = document.getElementById('username-input').value.trim();
            if (name === "") { alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù…Ùƒ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©!"); return; }
            currentUser = name;
            document.getElementById('user-display').textContent = currentUser;
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('status-bar').classList.remove('hidden');
            document.getElementById('dashboard-screen').classList.remove('hidden');
            renderDashboard();
        }

        function renderDashboard() {
            const grid = document.getElementById('quiz-grid');
            grid.innerHTML = '';
            
            Object.values(quizDatabase).forEach(quiz => {
                const card = document.createElement('div');
                card.className = 'bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100 card-hover transition-all duration-300 flex flex-col';
                // Ø¯Ø¹Ù… Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…Ø®ØªÙ„ÙØ©
                const colorClass = quiz.color === 'emerald' ? 'bg-emerald-600 text-white' : 
                                   (quiz.color === 'indigo' ? 'bg-indigo-600 text-white' : 
                                   (quiz.color === 'purple' ? 'bg-purple-600 text-white' : 'bg-blue-600 text-white'));
                
                const lightText = quiz.color === 'emerald' ? 'text-emerald-100' : 'text-blue-100';

                card.innerHTML = `
                    <div class="${colorClass} p-6 text-center relative overflow-hidden">
                        <i class="fa-solid ${quiz.icon || 'fa-question'} text-5xl mb-3 opacity-90 relative z-10"></i>
                        <h3 class="text-xl font-bold relative z-10">${quiz.title}</h3>
                        <p class="${lightText} text-sm mb-3 relative z-10">${quiz.desc}</p>
                        
                        <div class="inline-block bg-black/20 rounded-full px-3 py-1 text-xs font-bold backdrop-blur-sm relative z-10">
                            <i class="fa-regular fa-clock"></i> ${quiz.duration || 15} Ø¯Ù‚ÙŠÙ‚Ø©
                        </div>
                    </div>
                    <div class="p-6 flex-grow flex flex-col justify-end">
                        <div class="text-center mb-4 text-sm font-bold text-gray-400">
                             ${quiz.questions.length} Ø£Ø³Ø¦Ù„Ø©
                        </div>
                        <button onclick="startTest('${quiz.id}')" class="w-full bg-gray-900 hover:bg-gray-800 text-white font-bold py-3 rounded-lg transition-colors flex items-center justify-center gap-2">
                            Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± <i class="fa-solid fa-play text-xs"></i>
                        </button>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function startTest(id) {
            currentQuizId = id;
            const quiz = quizDatabase[id];
            
            document.getElementById('dashboard-screen').classList.add('hidden');
            document.getElementById('quiz-content').classList.remove('hidden');
            document.getElementById('timer-container').classList.remove('hidden');
            document.getElementById('timer-separator').classList.remove('hidden');
            
            // ØªÙ‡ÙŠØ¦Ø© ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
            document.getElementById('quiz-title').textContent = quiz.title;
            document.getElementById('quiz-q-count').textContent = quiz.questions.length + " Ø£Ø³Ø¦Ù„Ø©";
            const duration = quiz.duration || 15;
            document.getElementById('quiz-time-text').textContent = duration + " Ø¯Ù‚ÙŠÙ‚Ø©";

            document.getElementById('action-area').classList.remove('hidden');
            document.getElementById('result-area').classList.add('hidden');
            
            renderQuizQuestions(quiz.questions);
            startTimer(duration);
        }

        function renderQuizQuestions(questions) {
            const container = document.getElementById('quiz-questions-area');
            container.innerHTML = questions.map((q, index) => `
                <div class="p-4 bg-gray-50 rounded-lg border border-gray-200 hover:border-blue-300 transition-colors duration-200" id="q-${index}">
                    <p class="font-bold text-lg mb-3 flex items-start gap-2">
                        <span class="text-white bg-blue-600 rounded-full w-8 h-8 flex items-center justify-center text-sm flex-shrink-0 mt-1">${index + 1}</span>
                        <span class="mt-1">${q.question}</span>
                    </p>
                    ${q.code ? `<pre class="code-snippet bg-gray-900 text-green-400 p-4 rounded-lg mb-4 text-sm overflow-x-auto shadow-inner border border-gray-700 font-mono leading-relaxed" dir="ltr">${q.code}</pre>` : ''}
                    <div class="space-y-3 mr-10">
                        ${q.options.map((opt, optIndex) => `
                            <label class="flex items-center p-3 bg-white rounded-lg border border-gray-200 cursor-pointer hover:bg-blue-50 hover:border-blue-300 transition-all duration-200 group">
                                <input type="radio" name="q-${index}" value="${optIndex}" class="w-5 h-5 text-blue-600 focus:ring-blue-500 border-gray-300">
                                <span class="mr-3 text-gray-700 group-hover:text-blue-800">${opt}</span>
                            </label>
                        `).join('')}
                    </div>
                    <div class="feedback hidden mt-4 mr-10 p-4 rounded-lg text-sm font-bold flex items-center gap-2"></div>
                </div>
            `).join('');
        }

        function startTimer(minutes) {
            timeRemaining = minutes * 60;
            quizActive = true;
            const display = document.getElementById('timer-display');
            const container = document.getElementById('timer-container');
            
            container.className = 'flex items-center gap-2 text-yellow-300 font-mono font-bold text-lg transition-colors duration-300';
            
            if (timerInterval) clearInterval(timerInterval);
            
            timerInterval = setInterval(() => {
                if (!quizActive) { clearInterval(timerInterval); return; }
                
                let m = Math.floor(timeRemaining / 60);
                let s = timeRemaining % 60;
                display.textContent = `${m < 10 ? '0'+m : m}:${s < 10 ? '0'+s : s}`;
                
                if (timeRemaining < 60) {
                    container.classList.remove('text-yellow-300');
                    container.classList.add('text-red-400', 'animate-pulse');
                }
                
                if (--timeRemaining < 0) {
                    clearInterval(timerInterval);
                    alert("Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª!");
                    submitQuiz(new Event('submit'));
                }
            }, 1000);
        }

        async function submitQuiz(event) {
            event?.preventDefault();
            if (!quizActive && timeRemaining > 0 && event) return; 

            clearInterval(timerInterval);
            quizActive = false;
            document.getElementById('timer-container').classList.remove('text-yellow-300', 'animate-pulse', 'text-red-400');
            document.getElementById('timer-container').classList.add('text-gray-400');

            const quiz = quizDatabase[currentQuizId];
            let score = 0;
            
            quiz.questions.forEach((q, index) => {
                const selected = document.querySelector(`input[name="q-${index}"]:checked`);
                const div = document.getElementById(`q-${index}`);
                const feedback = div.querySelector('.feedback');
                
                div.querySelectorAll('input').forEach(i => i.disabled = true);
                
                feedback.classList.remove('hidden');
                if (selected && parseInt(selected.value) === q.correct) {
                    score++;
                    feedback.className = 'feedback mt-4 mr-10 p-4 rounded-lg text-sm font-bold flex items-center gap-2 bg-green-100 text-green-800 border border-green-200';
                    feedback.innerHTML = '<i class="fa-solid fa-circle-check"></i> Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©!';
                    div.classList.add('border-green-500', 'bg-green-50');
                } else {
                    feedback.className = 'feedback mt-4 mr-10 p-4 rounded-lg text-sm font-bold flex items-center gap-2 bg-red-100 text-red-800 border border-red-200';
                    feedback.innerHTML = `<i class="fa-solid fa-circle-xmark"></i> Ø®Ø·Ø£. Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©: ${q.options[q.correct]}`;
                    div.classList.add('border-red-500', 'bg-red-50');
                }
            });

            document.getElementById('action-area').classList.add('hidden');
            document.getElementById('result-area').classList.remove('hidden');
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ø³Ø¨Ø©
            const percentage = Math.round((score / quiz.questions.length) * 100);
            let msg = "";
            let color = "";
            if(percentage >= 90) { msg = "Ù…Ø³ØªÙˆÙ‰ Ù…Ù…ØªØ§Ø²! ğŸŒŸ"; color = "text-green-600"; }
            else if(percentage >= 70) { msg = "Ù…Ø³ØªÙˆÙ‰ Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹ ğŸ‘"; color = "text-blue-600"; }
            else if(percentage >= 50) { msg = "Ù…Ø³ØªÙˆÙ‰ Ù…ØªÙˆØ³Ø·ØŒ ØªØ­ØªØ§Ø¬ Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© ğŸ“š"; color = "text-yellow-600"; }
            else { msg = "ØªØ­ØªØ§Ø¬ Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªØ¯Ø±ÙŠØ¨ ÙÙŠ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª âš ï¸"; color = "text-red-600"; }

            document.getElementById('result-text').innerHTML = `
                <div class="text-lg mb-2 ${color} font-bold">${msg}</div>
                <div class="text-3xl text-gray-800">Ø§Ù„Ù†ØªÙŠØ¬Ø©: ${score} / ${quiz.questions.length}</div>
            `;
            
            sendToTelegram(quiz.title, score, quiz.questions.length);
        }

        function returnToDashboard() {
            clearInterval(timerInterval);
            quizActive = false;
            document.getElementById('quiz-content').classList.add('hidden');
            document.getElementById('timer-container').classList.add('hidden');
            document.getElementById('timer-separator').classList.add('hidden');
            document.getElementById('dashboard-screen').classList.remove('hidden');
        }

        async function sendToTelegram(title, score, total) {
            if (TELEGRAM_BOT_TOKEN.includes("YOUR")) return;
            try {
                await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, {
                    method: 'POST', headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        chat_id: TELEGRAM_CHAT_ID, parse_mode: 'Markdown',
                        text: `ğŸ“ *Ù†ØªÙŠØ¬Ø©* | ğŸ‘¤ ${currentUser}\nğŸ“š ${title}\nâœ… ${score}/${total}\nâ±ï¸ Ù…Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±: ${quizDatabase[currentQuizId].duration}Ø¯`
                    })
                });
            } catch(e) { console.error(e); }
        }

        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>